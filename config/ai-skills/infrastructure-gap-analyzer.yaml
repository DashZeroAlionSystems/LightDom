---
# Infrastructure Gap Analyzer Skill
# Enables DeepSeek to analyze infrastructure and identify gaps

skillId: infrastructure-gap-analyzer
name: "Infrastructure Gap Analyzer"
version: "1.0.0"
description: "AI skill for analyzing system infrastructure and identifying gaps, missing services, and optimization opportunities"
author: "LightDom System"
category: "infrastructure"

metadata:
  tags: ["infrastructure", "analysis", "optimization", "devops"]
  difficulty: "expert"
  estimatedTime: "10-20 minutes"
  requirements:
    - "System architecture knowledge"
    - "Access to codebase and service manifests"

model:
  provider: "deepseek"
  name: "deepseek-coder"
  temperature: 0.5
  maxTokens: 8192
  timeout: 240000

prompt:
  system: |
    You are an expert DevOps and Infrastructure Architect with deep knowledge of:
    - Microservices architecture
    - Cloud infrastructure (AWS, GCP, Azure)
    - Container orchestration (Kubernetes, Docker Swarm)
    - Service mesh and API gateways
    - Monitoring and observability (Prometheus, Grafana, ELK)
    - CI/CD pipelines
    - Database architecture and scaling
    - Security best practices
    - Performance optimization
    
    Your role is to analyze system infrastructure and identify:
    1. Missing or incomplete services
    2. Single points of failure
    3. Scaling bottlenecks
    4. Security vulnerabilities
    5. Monitoring gaps
    6. Integration opportunities
    7. Cost optimization areas
    8. Performance improvement opportunities
    
    Provide actionable recommendations with:
    - Priority level (Critical, High, Medium, Low)
    - Impact assessment
    - Implementation complexity
    - Estimated effort
    - Dependencies
    
  user: |
    Analyze the following infrastructure and identify gaps:
    
    ## Current Services
    {{#each services}}
    ### {{this.name}}
    - Type: {{this.type}}
    - Status: {{this.status}}
    - Dependencies: {{this.dependencies}}
    - Metrics: {{this.metrics}}
    {{/each}}
    
    ## System Architecture
    {{architecture}}
    
    ## Current Issues
    {{#if currentIssues}}
    {{currentIssues}}
    {{else}}
    No known issues reported
    {{/if}}
    
    ## Business Goals
    {{businessGoals}}
    
    ## Constraints
    {{#if constraints}}
    {{constraints}}
    {{else}}
    No specific constraints
    {{/if}}
    
    Please provide:
    1. **Gap Analysis** - What's missing or incomplete
    2. **Risk Assessment** - Potential issues and their impact
    3. **Service Relationship Map** - How services should connect
    4. **Recommendations** - Prioritized list of improvements
    5. **Implementation Roadmap** - Step-by-step plan
    6. **Cost-Benefit Analysis** - ROI for each recommendation
    
    Format as structured JSON with detailed explanations.

variables:
  services:
    type: "array"
    required: true
    description: "List of current services with their configurations"
    
  architecture:
    type: "string"
    required: true
    description: "System architecture description or diagram"
    
  currentIssues:
    type: "string"
    required: false
    description: "Known issues or pain points"
    
  businessGoals:
    type: "string"
    required: true
    description: "Business objectives and goals"
    
  constraints:
    type: "string"
    required: false
    description: "Budget, timeline, or technical constraints"

output:
  format: "json"
  validation:
    enabled: true
    schema:
      type: "object"
      required: ["gaps", "risks", "recommendations", "roadmap"]
  postProcessing:
    - type: "generateActionItems"
      enabled: true
    - type: "createJiraTickets"
      enabled: false
    - type: "estimateEffort"
      enabled: true

execution:
  retryOnFailure: true
  maxRetries: 2
  retryDelay: 10000
  timeout: 240000
  
  feedbackLoop:
    enabled: true
    iterations: 1
    evaluationCriteria:
      - "completeness"
      - "actionability"
      - "technical-accuracy"

integrations:
  database:
    enabled: true
    table: "infrastructure_analysis"
    
  filesystem:
    enabled: true
    outputDir: "./output/infrastructure-analysis"
    
  queue:
    enabled: true
    topic: "infrastructure-improvements"

training:
  enabled: true
  collectData: true
  feedbackRequired: true
  minimumRating: 4

dependencies: []

successCriteria:
  - type: "outputLength"
    min: 3000
    max: 30000
  - type: "containsKeywords"
    keywords: ["gaps", "recommendations", "priority", "roadmap"]
  - type: "validFormat"
    format: "json"
