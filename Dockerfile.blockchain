# Dockerfile for Blockchain Node
FROM node:18-alpine

WORKDIR /app

# Install required tools
RUN apk add --no-cache python3 make g++

# Copy package files
COPY package*.json ./

# Install dependencies
RUN npm ci

# Copy blockchain contracts and scripts
COPY contracts ./contracts
COPY scripts/blockchain ./scripts/blockchain
COPY hardhat.config.ts ./

# Compile contracts
RUN npx hardhat compile

EXPOSE 8545

CMD ["npx", "hardhat", "node"]
