{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "neural-network-workflow.json",
  "title": "Neural Network Workflow Configuration",
  "description": "Defines workflow for neural network training, deployment, and usage",
  "type": "object",
  "required": ["id", "name", "stages"],
  "properties": {
    "id": {
      "type": "string",
      "pattern": "^workflow-nn-[a-z0-9-]+$"
    },
    "name": {
      "type": "string"
    },
    "description": {
      "type": "string"
    },
    "modelType": {
      "type": "string",
      "enum": [
        "seo_optimization",
        "component_generation",
        "workflow_prediction",
        "accessibility_improvement",
        "ux_pattern_recognition",
        "schema_relationship_learning",
        "performance_optimization",
        "design_system_extraction",
        "content_generation",
        "sentiment_analysis"
      ]
    },
    "stages": {
      "type": "array",
      "minItems": 1,
      "items": {
        "$ref": "#/definitions/workflowStage"
      }
    },
    "triggers": {
      "type": "object",
      "properties": {
        "manual": {
          "type": "boolean",
          "default": true
        },
        "scheduled": {
          "type": "object",
          "properties": {
            "enabled": {
              "type": "boolean",
              "default": false
            },
            "cron": {
              "type": "string",
              "description": "Cron expression for scheduled execution"
            }
          }
        },
        "dataThreshold": {
          "type": "object",
          "properties": {
            "enabled": {
              "type": "boolean",
              "default": false
            },
            "minNewDataPoints": {
              "type": "integer",
              "minimum": 1,
              "description": "Trigger when this many new data points are available"
            }
          }
        },
        "performanceDegradation": {
          "type": "object",
          "properties": {
            "enabled": {
              "type": "boolean",
              "default": false
            },
            "accuracyThreshold": {
              "type": "number",
              "minimum": 0,
              "maximum": 1,
              "description": "Trigger retraining if accuracy falls below this"
            }
          }
        }
      }
    },
    "notifications": {
      "type": "object",
      "properties": {
        "onStart": {
          "type": "boolean",
          "default": true
        },
        "onComplete": {
          "type": "boolean",
          "default": true
        },
        "onError": {
          "type": "boolean",
          "default": true
        },
        "channels": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": ["email", "slack", "webhook", "dashboard"]
          },
          "default": ["dashboard"]
        }
      }
    }
  },
  "definitions": {
    "workflowStage": {
      "type": "object",
      "required": ["id", "name", "type"],
      "properties": {
        "id": {
          "type": "string"
        },
        "name": {
          "type": "string"
        },
        "type": {
          "type": "string",
          "enum": [
            "data_collection",
            "data_validation",
            "preprocessing",
            "feature_engineering",
            "model_training",
            "model_validation",
            "deployment",
            "monitoring"
          ]
        },
        "enabled": {
          "type": "boolean",
          "default": true
        },
        "config": {
          "type": "object",
          "description": "Stage-specific configuration"
        },
        "dependsOn": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Stage IDs that must complete before this stage"
        },
        "timeout": {
          "type": "integer",
          "minimum": 0,
          "description": "Timeout in seconds"
        },
        "retryPolicy": {
          "type": "object",
          "properties": {
            "maxRetries": {
              "type": "integer",
              "minimum": 0,
              "default": 3
            },
            "backoffMultiplier": {
              "type": "number",
              "minimum": 1,
              "default": 2
            }
          }
        }
      }
    }
  }
}
